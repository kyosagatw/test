<?xml version="1.0" encoding="utf-8"?>
<Defs>

    <!--
        StorytellerDef：定義一位新的故事敘述者。
        ParentName="BaseStoryteller" 表示繼承遊戲內建的基礎敘述者設定。
    -->
    <StorytellerDef ParentName="BaseStoryteller">

        <!-- 技術用識別名稱（不會顯示給玩家） -->
        <defName>Koelime_SaintMother</defName>

        <!-- 玩家在選單中看到的名稱 -->
        <label>『 聖母龍 』</label>

        <!-- 故事敘述者的描述文字（選單中顯示） -->
        <description>
在古老的傳說中，聖母龍是守護生命與希望的象徵。她以溫柔而堅定的目光注視著世界，見證文明的興衰、族群的誕生與消逝。如今，她將以敘事者的身份，講述珂莉姆的旅程——
那位背負古龍血脈、從孤獨中走向命運的少女。在她的故事裡，試煉與恩賜並存；危機與奇蹟交織。她不會讓你沉溺於平淡，也不會讓你被絕望吞噬。她會以龍之慈愛與智慧，引導你的故事走向未知的未來。
        </description>

        <!-- 大頭像（選單左側顯示） -->
        <portraitLarge>Storyteller/Koelime_SaintMother512</portraitLarge>

        <!-- 小頭像（遊戲內右上角顯示） -->
        <portraitTiny>Storyteller/Koelime_SaintMother128</portraitTiny>

        <!-- 故事敘述者在選單中的排序位置（數字越小越前面） -->
        <listOrder>53</listOrder>


        <!-- ============================= -->
        <!--   C-1：人口影響曲線（弱化版） -->
        <!-- ============================= -->

        <populationIntentFactorFromPopCurve>
            <!-- 人口越多 → 威脅略微增加，但影響非常小 -->
            <points>
                <li>0, 1.0</li>     <!-- 0 人：完全不增加威脅 -->
                <li>3, 1.0</li>     <!-- 3 人：部落開局，威脅不變 -->
                <li>6, 1.1</li>     <!-- 6 人：微幅增加 -->
                <li>10, 1.2</li>    <!-- 10 人：小幅增加 -->
                <li>15, 1.3</li>    <!-- 15 人：中等增加 -->
                <li>20, 1.4</li>    <!-- 20 人：略微增加 -->
            </points>
        </populationIntentFactorFromPopCurve>


        <!-- ============================= -->
        <!--   C-2：人口適應曲線（前期保護） -->
        <!-- ============================= -->

        <populationIntentFactorFromPopAdaptDaysCurve>
            <!-- 適應越高 → 威脅越低（前期保護） -->
            <points>
                <li>0, 1.0</li>     <!-- 第一天：正常 -->
                <li>10, 0.8</li>    <!-- 10 天：降低威脅 -->
                <li>30, 0.6</li>    <!-- 30 天：大幅降低威脅 -->
                <li>60, 0.8</li>    <!-- 60 天：開始回升 -->
                <li>120, 1.0</li>   <!-- 120 天：恢復正常 -->
            </points>
        </populationIntentFactorFromPopAdaptDaysCurve>


        <!-- ============================= -->
        <!--   C-3：天數影響曲線（主要威脅來源） -->
        <!-- ============================= -->

        <pointsFactorFromDaysPassed>
            <points>
                <li>0, 0.2</li>      <!-- 第 0 天：非常安全 -->
                <li>30, 0.3</li>     <!-- 30 天：仍然安全 -->
                <li>60, 0.6</li>     <!-- 60 天：開始有威脅 -->
                <li>120, 1.0</li>    <!-- 120 天：正式中世紀 -->
                <li>240, 1.2</li>    <!-- 240 天：火槍時代開始 -->
                <li>400, 1.5</li>    <!-- 超後期：威脅略微上升 -->
            </points>
        </pointsFactorFromDaysPassed>


        <!-- ============================= -->
        <!--   C-4：適應度成長速度 -->
        <!-- ============================= -->

        <adaptDaysGrowthRateCurve>
            <points>
                <li>0, 1.2</li>     <!-- 前期適應度成長快（保護玩家） -->
                <li>30, 1.0</li>
                <li>60, 0.8</li>    <!-- 60 天後開始變慢 -->
                <li>120, 0.6</li>   <!-- 中世紀時期：適應度影響變小 -->
            </points>
        </adaptDaysGrowthRateCurve>


        <!-- ============================= -->
        <!--   C-5：適應度影響威脅 -->
        <!-- ============================= -->

        <pointsFactorFromAdaptDays>
            <points>
                <li>0, 0.7</li>     <!-- 前期：適應度大幅降低威脅 -->
                <li>30, 0.6</li>
                <li>60, 0.8</li>    <!-- 60 天後開始回升 -->
                <li>120, 1.0</li>   <!-- 中世紀：恢復正常 -->
            </points>
        </pointsFactorFromAdaptDays>

    <comps>
        <!-- ============================= -->
        <!--   A：珂莉姆 Storyteller 威脅節奏（修正版） -->
        <!--   只控制入侵與連續威脅，不含一般小事件 -->
        <!-- ============================= -->

        <!-- 小威脅（ThreatSmall）：30 天前禁止 -->
<!-- ========================= -->
<!--      ThreatSmall 小威脅     -->
<!-- ========================= -->
<li Class="StorytellerCompProperties_OnOffCycle">
  <category>ThreatSmall</category>

  <!-- 前 15 天不觸發小襲擊 -->
  <minDaysPassed>15</minDaysPassed>

  <!-- 小襲擊週期：3 天活躍 + 4 天冷卻 = 7 天一輪 -->
  <onDays>3</onDays>
  <offDays>4</offDays>

  <!-- 小襲擊至少間隔 2 天 -->
  <minSpacingDays>2</minSpacingDays>

  <!-- 每次活躍期觸發 1 次 -->
  <numIncidentsRange>1</numIncidentsRange>

  <!-- 威脅點數曲線：100=0 → 800=1 → 1200=0 -->
  <acceptPercentFactorPerThreatPointsCurve>
    <points>
      <li>(100, 0)</li>
      <li>(800, 1)</li>
      <li>(1200, 0)</li>
    </points>
  </acceptPercentFactorPerThreatPointsCurve>
</li>

<!-- ========================= -->
<!--      ThreatBig 大威脅      -->
<!-- ========================= -->

<li Class="StorytellerCompProperties_OnOffCycle">
  <category>ThreatBig</category>

  <!-- 前 90 天不觸發大襲擊 -->
  <minDaysPassed>90</minDaysPassed>

  <!-- 大襲擊週期：5 天活躍 + 10 天冷卻 = 15 天一輪 -->
  <onDays>5</onDays>
  <offDays>10</offDays>

  <!-- 大襲擊至少間隔 5 天 -->
  <minSpacingDays>5</minSpacingDays>

  <!-- 每次活躍期觸發 1 次 -->
  <numIncidentsRange>1</numIncidentsRange>

  <!-- 威脅點數曲線：800=0 → 1600=1 -->
  <acceptPercentFactorPerThreatPointsCurve>
    <points>
      <li>(800, 0)</li>
      <li>(1600, 1)</li>
    </points>
  </acceptPercentFactorPerThreatPointsCurve>
</li>

<!-- ========================= -->
<!--   ThreatsGenerator 連續威脅 -->
<!-- ========================= -->

<li Class="StorytellerCompProperties_ThreatsGenerator">
  <allowedTargetTags>
    <li>Map_RaidBeacon</li>
  </allowedTargetTags>

  <parms>
    <allowedThreats>Raids</allowedThreats>

    <!-- 活躍期 1 天 -->
    <onDays>1.0</onDays>

    <!-- 冷卻期 1 天 -->
    <offDays>1.0</offDays>

    <!-- 最小間隔 0.4 天（避免連續轟炸） -->
    <minSpacingDays>0.4</minSpacingDays>

    <!-- 每次活躍期只觸發 1 次 -->
    <numIncidentsRange>1</numIncidentsRange>
<minThreatPoints>600</minThreatPoints>
  </parms>
</li>

<li Class="StorytellerCompProperties_RandomMain">
  <allowedTargetTags>
    <li>Map_PlayerHome</li>
  </allowedTargetTags>

  <minDaysPassed>7</minDaysPassed>
  <mtbDays>3.5</mtbDays>
  <maxThreatBigIntervalDays>30</maxThreatBigIntervalDays>

  <minIncChancePopulationIntentFactor>0.2</minIncChancePopulationIntentFactor>
  <randomPointsFactorRange>0.8~1.2</randomPointsFactorRange>
  <skipThreatBigIfRaidBeacon>false</skipThreatBigIfRaidBeacon>

  <categoryWeights>
    <Misc>8.0</Misc>
    <ThreatBig>0</ThreatBig>
    <OrbitalVisitor>0</OrbitalVisitor>
    <FactionArrival>4</FactionArrival>
    <ThreatSmall>2</ThreatSmall>
    <ShipChunkDrop>0</ShipChunkDrop>
  </categoryWeights>
</li>

<li Class="StorytellerCompProperties_CategoryMTB">
  <category>Misc</category>
  <allowedTargetTags>
    <li>Map_PlayerHome</li>
  </allowedTargetTags>
  <minDaysPassed>7</minDaysPassed>
  <mtbDays>5</mtbDays>
</li>

<li Class="StorytellerCompProperties_ShipChunkDrop"/>

<li Class="StorytellerCompProperties_Disease">
  <category>DiseaseHuman</category>
  <minDaysPassed>30</minDaysPassed>
</li>

<li Class="StorytellerCompProperties_Disease">
  <category>DiseaseAnimal</category>
  <minDaysPassed>15</minDaysPassed>
</li>

<li Class="StorytellerCompProperties_FactionInteraction">
  <incident>RaidFriendly</incident>
  <baseIncidentsPerYear>12</baseIncidentsPerYear>
  <minSpacingDays>1</minSpacingDays>
  <fullAlliesOnly>true</fullAlliesOnly>
  <minDanger>High</minDanger>
</li>

<li Class="StorytellerCompProperties_FactionInteraction">
  <incident>TraderCaravanArrival</incident>
  <minDaysPassed>15</minDaysPassed>
  <baseIncidentsPerYear>12</baseIncidentsPerYear>
  <minSpacingDays>3</minSpacingDays>
  <allowedTargetTags>
    <li>Map_PlayerHome</li>
  </allowedTargetTags>
</li>

<li Class="StorytellerCompProperties_FactionInteraction">
  <incident>VisitorGroup</incident>
  <minDaysPassed>15</minDaysPassed>
  <baseIncidentsPerYear>12</baseIncidentsPerYear>
  <minSpacingDays>3</minSpacingDays>
  <allowedTargetTags>
    <li>Map_PlayerHome</li>
  </allowedTargetTags>
</li>

<li Class="StorytellerCompProperties_FactionInteraction">
  <incident>TravelerGroup</incident>
  <minDaysPassed>7</minDaysPassed>
  <baseIncidentsPerYear>12</baseIncidentsPerYear>
  <minSpacingDays>2</minSpacingDays>
  <allowedTargetTags>
    <li>Map_PlayerHome</li>
  </allowedTargetTags>
</li>

      <!-- Caravan / temp map -->
      <li Class="StorytellerCompProperties_CategoryIndividualMTBByBiome">
        <category>Misc</category>
        <allowedTargetTags>
          <li>Caravan</li>
          <li>Map_TempIncident</li>
        </allowedTargetTags>
      </li>
      <li Class="StorytellerCompProperties_CategoryIndividualMTBByBiome">
        <category>ThreatSmall</category>
        <applyCaravanVisibility>true</applyCaravanVisibility>
        <allowedTargetTags>
          <li>Caravan</li>
          <li>Map_TempIncident</li>
        </allowedTargetTags>
      </li>
      <li Class="StorytellerCompProperties_CategoryIndividualMTBByBiome">
        <category>ThreatBig</category>
        <applyCaravanVisibility>true</applyCaravanVisibility>
        <allowedTargetTags>
          <li>Caravan</li>
          <li>Map_TempIncident</li>
        </allowedTargetTags>
      </li>

<li Class="StorytellerCompProperties_RandomQuest">
  <category>GiveQuest</category>
  <allowedTargetTags>
    <li>World</li>
  </allowedTargetTags>
  <onDays>10</onDays>
  <numIncidentsRange>1</numIncidentsRange>
  <acceptFractionByDaysPassedCurve>
    <points>
      <li>(7, 0)</li>
      <li>(14, 1)</li>
    </points>
  </acceptFractionByDaysPassedCurve>
  <minSpacingDays>3</minSpacingDays>
  <disableIfAnyModActive>
    <li>Ludeon.RimWorld.Royalty</li>
  </disableIfAnyModActive>
</li>

<li Class="StorytellerCompProperties_RandomQuest">
  <category>GiveQuest</category>
  <allowedTargetTags>
    <li>World</li>
  </allowedTargetTags>
  <onDays>7</onDays>
  <numIncidentsRange>1</numIncidentsRange>
  <acceptFractionByDaysPassedCurve>
    <points>
      <li>(7, 0)</li>
      <li>(14, 1)</li>
    </points>
  </acceptFractionByDaysPassedCurve>
  <minSpacingDays>3</minSpacingDays>
  <enableIfAnyModActive>
    <li>Ludeon.RimWorld.Royalty</li>
  </enableIfAnyModActive>
</li>

<li Class="StorytellerCompProperties_CategoryMTB">
  <category>Misc</category>
  <allowedTargetTags>
    <li>World</li>
  </allowedTargetTags>
  <minDaysPassed>3</minDaysPassed>
  <mtbDays>7</mtbDays>
</li>

    </comps>
    </StorytellerDef>
</Defs>