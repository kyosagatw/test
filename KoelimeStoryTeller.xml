<?xml version="1.0" encoding="utf-8"?>
<Defs>

    <!--
        StorytellerDef：定義一位新的故事敘述者。
        ParentName="BaseStoryteller" 表示繼承遊戲內建的基礎敘述者設定。
    -->
    <StorytellerDef ParentName="BaseStoryteller">

        <!-- 技術用識別名稱（不會顯示給玩家） -->
        <defName>Koelime_SaintMother</defName>

        <!-- 玩家在選單中看到的名稱 -->
        <label>『 聖母龍 』</label>

        <!-- 故事敘述者的描述文字（選單中顯示） -->
        <description>
在古老的傳說中，聖母龍是守護生命與希望的象徵。她以溫柔而堅定的目光注視著世界，見證文明的興衰、族群的誕生與消逝。如今，她將以敘事者的身份，講述珂莉姆的旅程——
那位背負古龍血脈、從孤獨中走向命運的少女。在她的故事裡，試煉與恩賜並存；危機與奇蹟交織。她不會讓你沉溺於平淡，也不會讓你被絕望吞噬。她會以龍之慈愛與智慧，引導你的故事走向未知的未來。
        </description>

        <!-- 大頭像（選單左側顯示） -->
        <portraitLarge>Storyteller/Koelime_SaintMother512</portraitLarge>

        <!-- 小頭像（遊戲內右上角顯示） -->
        <portraitTiny>Storyteller/Koelime_SaintMother128</portraitTiny>

        <!-- 故事敘述者在選單中的排序位置（數字越小越前面） -->
        <listOrder>53</listOrder>


<populationIntentFactorFromPopCurve>
    <!-- 「基於調整後人口數的事件意圖因子曲線」，它直接影響 新殖民者事件（例如流浪者加入、訪客留下、奴隸商隊出現） 的觸發率。-->
    <points>
        <li>0, 8.0</li>
        <!-- 調整後人口=0時，因子8.0（人口極少，事件觸發率最高） -->
        <li>3, 8.0</li>
        <!-- 調整後人口=1時，因子8.0 -->
        <li>6, 6.0</li>
        <!-- 調整後人口=4時，因子2.0（人口增加，觸發率下降） -->
        <li>9, 3.0</li>
        <!-- 調整後人口=7時，因子0.35 -->
        <li>12, 2.0</li>
        <!-- 調整後人口=11時，因子0.0（事件幾乎不再觸發） -->
        <li>24, 0.0</li>
        <!-- 調整後人口=20時，因子-1.0（完全抑制新殖民者事件） -->
    </points>
</populationIntentFactorFromPopCurve>

<populationIntentFactorFromPopAdaptDaysCurve>
    <!-- 自上次獲得殖民者以來的天數（人口適應天數） 對事件觸發率的影響。 -->
    <points>
        <li>(0, 0)</li>
        <!-- 適應天數=0時，因子0（剛獲得殖民者，暫時不再觸發新事件） -->
        <li>(7, 1)</li>
        <!-- 適應天數≥8時，因子1（超過8天後，觸發率恢復正常） -->
    </points>
</populationIntentFactorFromPopAdaptDaysCurve>

<pointsFactorFromDaysPassed>
    <!-- 遊戲總經過天數 對事件觸發率的影響 -->
    <points>
        <li>(3, 0.70)</li>
        <!-- 第5天，因子0.70（遊戲初期事件觸發率較低） -->
        <li>(7, 1.00)</li>
        <!-- 第10天，因子1.00（進入正常事件觸發率） -->
    </points>
</pointsFactorFromDaysPassed>

<adaptDaysMin>-30</adaptDaysMin>
<!-- 最小適應天數：-60（當殖民者死亡或暴力倒地時，系統會倒扣適應天數，讓遊戲更快觸發新殖民者事件來補充人力） -->
<adaptDaysMax>60</adaptDaysMax>
<!-- 最大適應天數：100 當殖民者長期沒有加入，適應天數會逐漸增加-->
<adaptDaysGameStartGraceDays>7</adaptDaysGameStartGraceDays>
<!-- 遊戲開始時的「寬限期」：5 -->

<adaptDaysLossFromColonistLostByPostPopulation>
    <!-- 當殖民者死亡時，人口適應天數會被倒扣多少，而倒扣的幅度取決於當前人口數。 -->
    <points>
        <li>(3, 20)</li>
        <!-- 人口0時，損失30天 -->
        <li>(12, 15)</li>
        <!-- 人口11時，損失30天 -->
        <li>(20, 10)</li>
        <!-- 人口20時，損失20天（高人口時扣減較少） -->
    </points>
</adaptDaysLossFromColonistLostByPostPopulation>

<adaptDaysLossFromColonistViolentlyDownedByPopulation>
    <!-- 基於人口數的殖民者暴力倒地適應天數扣減曲線 殖民者在戰鬥或事故中被擊倒（失去行動能力），但還活著-->
    <points>
        <li>(1, 6)</li>
        <!-- 人口1時，損失8天 -->
        <li>(2, 6)</li>
        <!-- 人口2時，損失6天 -->
        <li>(3, 6)</li>
        <!-- 人口3時，損失6天 -->
        <li>(11, 4)</li>
        <!-- 人口11時，損失5天 -->
        <li>(20, 2)</li>
        <!-- 人口20時，損失3.5天 -->
    </points>
</adaptDaysLossFromColonistViolentlyDownedByPopulation>

<adaptDaysGrowthRateCurve>
    <!-- 適應天數增長率曲線（殖民者加入/損失後的恢復速度）- 人口適應天數（Population Adapt Days）：控制新殖民者事件的冷卻期 -->
    <points>
        <li>(-30.01, 6)</li>
        <!-- -30.01天時，增長率6（殖民者剛死亡或倒地時，冷卻時間會以極快速度恢復，確保遊戲盡快補充人力） -->
        <li>(-30, 3)</li>
        <!-- -30天時，增長率3 -->
        <li>(-0.01, 3)</li>
        <!-- -0.01天時，增長率3 -->
        <li>(0, 1)</li>
        <!-- 0天時，增長率1（正常速度） -->
        <li>(20, 0.9)</li>
        <!-- 59.99天時，增長率1 -->
        <li>(30, 0.8)</li>
        <!-- 60天時，增長率0.5（長期穩定下降） -->
        <li>(40, 0.7)</li>
        <!-- 119.99天時，增長率0.5 -->
        <li>(50, 0.6)</li>
        <!-- 120天時，增長率0.25 -->
    </points>
</adaptDaysGrowthRateCurve>

<pointsFactorFromAdaptDays>
    <!-- 基於適應天數的事件觸發因子曲線 剛加入殖民者時，觸發率偏低；隨著時間拉長，觸發率逐漸提升，確保長期孤立的殖民地仍能獲得補充-->
    <points>
        <li>(-30, 0.40)</li>
        <!-- 適應天數-30時，因子0.40（殖民者損失後，事件觸發率降低） -->
        <li>(0, 0.80)</li>
        <!-- 適應天數0時，因子0.80（剛加入殖民者，觸發率偏低） -->
        <li>(10, 1.00)</li>
        <!-- 適應天數30時，因子1.00（恢復正常） -->
        <li>(20, 1.20)</li>
        <!-- 適應天數60時，因子1.20（觸發率提升） -->
        <li>(30, 1.60)</li>
        <!-- 適應天數120時，因子1.60（兩年後觸發率更高） -->
        <li>(40, 2.00)</li>
        <!-- 適應天數180時，因子2.00（四年後觸發率翻倍） -->
    </points>
</pointsFactorFromAdaptDays>


    <comps>
<li Class="StorytellerCompProperties_RandomMain">
  <allowedTargetTags>
    <li>Map_PlayerHome</li>
  </allowedTargetTags>

  <minDaysPassed>3</minDaysPassed>
  <mtbDays>1</mtbDays>
  <maxThreatBigIntervalDays>30</maxThreatBigIntervalDays>

  <minIncChancePopulationIntentFactor>0.5</minIncChancePopulationIntentFactor>
  <randomPointsFactorRange>0.8~1.2</randomPointsFactorRange>
  <skipThreatBigIfRaidBeacon>false</skipThreatBigIfRaidBeacon>

  <categoryWeights>
    <Misc>6.0</Misc>
    <ThreatBig>1</ThreatBig>
    <OrbitalVisitor>0</OrbitalVisitor>
    <FactionArrival>4</FactionArrival>
    <ThreatSmall>2</ThreatSmall>
    <ShipChunkDrop>1</ShipChunkDrop>
  </categoryWeights>
</li>


<!-- ========================= -->
<!--      ThreatSmall 小威脅     -->
<!-- ========================= -->
<li Class="StorytellerCompProperties_OnOffCycle">
  <category>ThreatSmall</category>

  <!-- 前 15 天不觸發小襲擊 -->
  <minDaysPassed>15</minDaysPassed>

  <!-- 小襲擊週期：3 天活躍 + 4 天冷卻 = 7 天一輪 -->
  <onDays>3</onDays>
  <offDays>4</offDays>

  <!-- 小襲擊至少間隔 2 天 -->
  <minSpacingDays>2</minSpacingDays>

  <!-- 每次活躍期觸發 1 次 -->
  <numIncidentsRange>1</numIncidentsRange>

  <!-- 威脅點數曲線：100=0 → 800=1 → 1200=0 -->
  <acceptPercentFactorPerThreatPointsCurve>
    <points>
      <li>(100, 0)</li>
      <li>(800, 1)</li>
      <li>(1200, 0)</li>
    </points>
  </acceptPercentFactorPerThreatPointsCurve>
</li>

<!-- ========================= -->
<!--      ThreatBig 大威脅      -->
<!-- ========================= -->
<li Class="StorytellerCompProperties_OnOffCycle">
  <category>ThreatBig</category>

  <!-- 前 90 天不觸發大襲擊 -->
  <minDaysPassed>90</minDaysPassed>

  <!-- 大襲擊週期：5 天活躍 + 10 天冷卻 = 15 天一輪 -->
  <onDays>5</onDays>
  <offDays>10</offDays>

  <!-- 大襲擊至少間隔 5 天 -->
  <minSpacingDays>5</minSpacingDays>

  <!-- 每次活躍期觸發 1 次 -->
  <numIncidentsRange>1</numIncidentsRange>

  <!-- 威脅點數曲線：800=0 → 1600=1 -->
  <acceptPercentFactorPerThreatPointsCurve>
    <points>
      <li>(800, 0)</li>
      <li>(1600, 1)</li>
    </points>
  </acceptPercentFactorPerThreatPointsCurve>
</li>

<!-- ========================= -->
<!--   ThreatsGenerator 連續威脅 -->
<!-- ========================= -->
<li Class="StorytellerCompProperties_ThreatsGenerator">
  <allowedTargetTags>
    <li>Map_RaidBeacon</li>
  </allowedTargetTags>

  <parms>
    <allowedThreats>Raids</allowedThreats>

    <!-- 活躍期 1 天 -->
    <onDays>1.0</onDays>

    <!-- 冷卻期 1 天 -->
    <offDays>1.0</offDays>

    <!-- 最小間隔 0.4 天（避免連續轟炸） -->
    <minSpacingDays>0.4</minSpacingDays>

    <!-- 每次活躍期只觸發 1 次 -->
    <numIncidentsRange>1</numIncidentsRange>
<minThreatPoints>600</minThreatPoints>
  </parms>
</li>

<li Class="StorytellerCompProperties_CategoryMTB">
  <category>Misc</category>
  <allowedTargetTags>
    <li>Map_PlayerHome</li>
  </allowedTargetTags>
  <minDaysPassed>7</minDaysPassed>
  <mtbDays>3</mtbDays>
</li>

<li Class="StorytellerCompProperties_ShipChunkDrop"/>

<li Class="StorytellerCompProperties_Disease">
  <category>DiseaseHuman</category>
  <minDaysPassed>30</minDaysPassed>
</li>

<li Class="StorytellerCompProperties_Disease">
  <category>DiseaseAnimal</category>
  <minDaysPassed>15</minDaysPassed>
</li>

<li Class="StorytellerCompProperties_FactionInteraction">
  <incident>RaidFriendly</incident>
  <baseIncidentsPerYear>12</baseIncidentsPerYear>
  <minSpacingDays>1</minSpacingDays>
  <fullAlliesOnly>true</fullAlliesOnly>
  <minDanger>High</minDanger>
</li>

<li Class="StorytellerCompProperties_FactionInteraction">
  <incident>TraderCaravanArrival</incident>
  <minDaysPassed>10</minDaysPassed>
  <baseIncidentsPerYear>12</baseIncidentsPerYear>
  <minSpacingDays>3</minSpacingDays>
  <allowedTargetTags>
    <li>Map_PlayerHome</li>
  </allowedTargetTags>
</li>

<li Class="StorytellerCompProperties_FactionInteraction">
  <incident>VisitorGroup</incident>
  <minDaysPassed>10</minDaysPassed>
  <baseIncidentsPerYear>12</baseIncidentsPerYear>
  <minSpacingDays>3</minSpacingDays>
  <allowedTargetTags>
    <li>Map_PlayerHome</li>
  </allowedTargetTags>
</li>

<li Class="StorytellerCompProperties_FactionInteraction">
  <incident>TravelerGroup</incident>
  <minDaysPassed>7</minDaysPassed>
  <baseIncidentsPerYear>12</baseIncidentsPerYear>
  <minSpacingDays>2</minSpacingDays>
  <allowedTargetTags>
    <li>Map_PlayerHome</li>
  </allowedTargetTags>
</li>

      <!-- Caravan / temp map -->
      <li Class="StorytellerCompProperties_CategoryIndividualMTBByBiome">
        <category>Misc</category>
        <allowedTargetTags>
          <li>Caravan</li>
          <li>Map_TempIncident</li>
        </allowedTargetTags>
      </li>
      <li Class="StorytellerCompProperties_CategoryIndividualMTBByBiome">
        <category>ThreatSmall</category>
        <applyCaravanVisibility>true</applyCaravanVisibility>
        <allowedTargetTags>
          <li>Caravan</li>
          <li>Map_TempIncident</li>
        </allowedTargetTags>
      </li>
      <li Class="StorytellerCompProperties_CategoryIndividualMTBByBiome">
        <category>ThreatBig</category>
        <applyCaravanVisibility>true</applyCaravanVisibility>
        <allowedTargetTags>
          <li>Caravan</li>
          <li>Map_TempIncident</li>
        </allowedTargetTags>
      </li>

<li Class="StorytellerCompProperties_RandomQuest">
  <category>GiveQuest</category>
  <allowedTargetTags>
    <li>World</li>
  </allowedTargetTags>
  <onDays>10</onDays>
  <numIncidentsRange>1</numIncidentsRange>
  <acceptFractionByDaysPassedCurve>
    <points>
      <li>(5, 0)</li>
      <li>(10, 1)</li>
    </points>
  </acceptFractionByDaysPassedCurve>
  <minSpacingDays>3</minSpacingDays>
  <disableIfAnyModActive>
    <li>Ludeon.RimWorld.Royalty</li>
  </disableIfAnyModActive>
</li>

<li Class="StorytellerCompProperties_RandomQuest">
  <category>GiveQuest</category>
  <allowedTargetTags>
    <li>World</li>
  </allowedTargetTags>
  <onDays>5</onDays>
  <numIncidentsRange>1</numIncidentsRange>
  <acceptFractionByDaysPassedCurve>
    <points>
      <li>(5, 0)</li>
      <li>(10, 1)</li>
    </points>
  </acceptFractionByDaysPassedCurve>
  <minSpacingDays>3</minSpacingDays>
  <enableIfAnyModActive>
    <li>Ludeon.RimWorld.Royalty</li>
  </enableIfAnyModActive>
</li>

<li Class="StorytellerCompProperties_CategoryMTB">
  <category>Misc</category>
  <allowedTargetTags>
    <li>World</li>
  </allowedTargetTags>
  <minDaysPassed>7</minDaysPassed>
  <mtbDays>3</mtbDays>
</li>

    </comps>
    </StorytellerDef>
</Defs>